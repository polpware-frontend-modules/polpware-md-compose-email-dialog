!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@angular/material"),require("@polpware/md-components"),require("ngx-chips"),require("ngx-autosize")):"function"==typeof define&&define.amd?define("@polpware/md-compose-email-dialog",["exports","@angular/core","@angular/common","@angular/forms","@angular/material","@polpware/md-components","ngx-chips","ngx-autosize"],t):t((e.polpware=e.polpware||{},e.polpware["md-compose-email-dialog"]={}),e.ng.core,e.ng.common,e.ng.forms,e.ng.material,e.mdComponents,e.ngxChips,e.ngxAutosize)}(this,function(e,t,n,o,i,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var m=function(o){function e(e,t){var n=o.call(this,e)||this;return n.dialogRef=e,(n.data=t).title&&(n.title=t.title),n.messageBody=t.emailBody||"",n.alertMessage="",n.alertSubMessage="",n.alertType=r.AlertTypeEnum.none,n.alertDismissible=!1,n.onTextChange=t.onTextChange,n.autocompleteItemsAsync=t.autocompleteItemsAsync,n}return function a(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,o),Object.defineProperty(e.prototype,"isSubmitDisabled",{get:function(){return 0===this.emails.length||this.alertType===r.AlertTypeEnum.running},enumerable:!0,configurable:!0}),e.prototype.onOutOfTagInput=function(e){this.emailInputBox.dropdown&&this.emailInputBox.dropdown.isVisible||o.prototype.onOutOfTagInput.call(this,e)},e.prototype.onSubmit=function(){var t=this,n=[];this.emails.forEach(function(e){var t=e||e.value;r.parseOnlyEmails(t).forEach(function(e){n.push(e)})});var e={confirmed:!0,emailReceivers:n,emailBody:this.messageBody,emailTitle:this.data.emailTitle||""};this.data.processor?(this.alertType=r.AlertTypeEnum.running,this.alertMessage="The email is being sent out.",this.alertSubMessage="",this.alertDismissible=!1,this.data.processor(e).then(function(){t.alertType=r.AlertTypeEnum.none,t.dialogRef.close({succeed:!0})},function(e){t.alertType=r.AlertTypeEnum.error,t.alertMessage="Something went wrong.",t.alertDismissible=!0,t.alertSubMessage=e&&e.errorInfo?e.errorInfo:""})):this.dialogRef.close(e)},e.decorators=[{type:t.Component,args:[{selector:"polp-md-compose-email-dialog",template:'<h2 mat-dialog-title>\n    {{title}}\n    <button class="float-right"\n            mat-icon-button\n            tabIndex="-1"\n            [mat-dialog-close]="true">\n        <mat-icon>close</mat-icon>\n    </button>\n</h2>\n\n<mat-dialog-content>\n\n    <polp-md-alert-box [message]="alertMessage"\n                       [subMessage]="alertSubMessage"\n                       [kind]="alertType"\n                       [dismissible]="alertDismissible">\n    </polp-md-alert-box>\n\n    <form name="emailForm" autocomplete="off">\n        <div class="flex-box flex-column margin-bottom-15">\n            <tag-input [(ngModel)]="emails" #emailInputBox\n                       name="emailInputs"\n                       (focusout)="onOutOfTagInput($event)"\n                       (onTextChange)="onTextChange($event)"\n                       [addOnPaste]="true"\n                       [modelAsStrings]="true"\n                       [trimTags]="true"\n                       [editable]="true"\n                       [errorMessages]="errorMessages"\n                       [validators]="validators"\n                       [secondaryPlaceholder]="\'Emails\'"\n                       [separatorKeyCodes]="[32,44,58,59]"\n                       [displayBy]="\'display\'"\n                       [identifyBy]="\'value\'"                       \n                       [placeholder]="\'Emails\'">\n                <tag-input-dropdown [autocompleteItems]="autocompleteItemsAsync | async">\n                    <ng-template let-item="item" let-index="index">\n                        {{ item.display }}\n                    </ng-template>\n                </tag-input-dropdown>\n            </tag-input>\n\n            <div class="full-width margin-top-10">\n                <textarea name="messageBodyInput"\n                          class="full-width"\n                          #emailBody\n                          autosize [minRows]="5" [maxRows]="10"\n                          placeholder="Type your personal message here"\n                          [(ngModel)]="messageBody">\n                </textarea>\n            </div>\n\n        </div>\n    </form>\n\n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <button mat-flat-button\n            color="primary"\n            [disabled]="isSubmitDisabled"\n            (click)="onSubmit()">\n        Send\n    </button>\n</mat-dialog-actions>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:i.MatDialogRef},{type:undefined,decorators:[{type:t.Inject,args:[i.MAT_DIALOG_DATA]}]}]},e}(r.EmailFormAbstractComponent),u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[m],imports:[n.CommonModule,o.ReactiveFormsModule,o.FormsModule,i.MatDialogModule,i.MatButtonModule,i.MatIconModule,a.TagInputModule,s.AutosizeModule,r.PolpMdComponentsModule],exports:[m],entryComponents:[m]}]}],e}();e.ComposeEmailDialogComponent=m,e.PolpMdComposeEmailDialogModule=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polpware-md-compose-email-dialog.umd.min.js.map